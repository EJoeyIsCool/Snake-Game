javascript:(function(){const t=560,e=4,n=40,o=12,i=48,r="rgb(30, 30, 30)",a="rgb(100, 200, 100)",s="rgb(200, 50, 50)",d=["rgb(255, 50, 50)","rgb(255, 100, 100)","rgb(255, 150, 150)"],l=function(t,e){return{x:t,y:e}},c=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},h=function(t,e){return{x:t.x*e,y:t.y*e}},u=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},p=class{constructor(t){this.pos=l(t.x,t.y),this.vel=l(16*Math.random()-8,16*Math.random()-8),this.radius=Math.floor(6+5*Math.random()),this.color=d[Math.floor(3*Math.random())],this.alpha=255}update(){this.pos=c(this.pos,this.vel),this.vel=h(this.vel,.85),this.radius=Math.max(0,this.radius-.3),this.alpha=Math.max(0,this.alpha-5)}draw(t){t.save(),t.globalAlpha=this.alpha/255,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.restore()}},m=class{constructor(){this.reset()}reset(){this.head=l(t/2,t/2),this.direction=l(0,0),this.body=[];for(let e=0;e<10;e++)this.body.push(l(this.head.x,this.head.y));this.length=10,this.next_direction=l(0,0),this.pending_direction=null,this.min_turn_distance=24,this.last_turn_pos=l(this.head.x,this.head.y),this.active=!1}update(){if(this.active){if(this.pending_direction){const t=u({x:this.head.x-this.last_turn_pos.x,y:this.head.y-this.last_turn_pos.y});t>=this.min_turn_distance&&(this.change_direction(this.pending_direction),this.pending_direction=null)}(this.next_direction.x!==-this.direction.x||this.next_direction.y!==-this.direction.y)&&(this.direction=l(this.next_direction.x,this.next_direction.y)),this.head=c(this.head,h(this.direction,e)),this.body.unshift(l(this.head.x,this.head.y));for(;this.body.length>this.length;)this.body.pop()}}check_wall_collision(){return this.head.x<0||this.head.x>t||this.head.y<0||this.head.y>t}change_direction(e){if(!this.active)return this.active=!0,this.direction=e,this.next_direction=e,void(this.last_turn_pos=l(this.head.x,this.head.y));if(e.x===-this.direction.x&&e.y===-this.direction.y)return;const n=u({x:this.head.x-this.last_turn_pos.x,y:this.head.y-this.last_turn_pos.y});n>=this.min_turn_distance?(this.next_direction=e,this.last_turn_pos=l(this.head.x,this.head.y)):(e.x!==this.next_direction.x||e.y!==this.next_direction.y)&&(this.pending_direction=e)}is_position_safe(e){for(const%20n%20of%20this.body){const%20o=e.x-n.x,r=e.y-n.y;if(Math.sqrt(o*o+r*r)%3Ci)return!1}return!0}draw(e){e.fillStyle=a;for(const%20t%20of%20this.body)e.beginPath(),e.arc(t.x,t.y,o,0,2*Math.PI),e.fill()}},g=class{constructor(){this.radius=12,this.generate_safe_position()}generate_safe_position(){let%20e,n=!1;for(let%20o=0;o%3C1000;o++){e=l(this.radius+Math.random()*(t-2*this.radius),this.radius+Math.random()*(t-2*this.radius));if((e.x%3E100&&e.x%3Ct-100&&e.y%3E100&&e.y%3Ct-100)&&u({x:e.x-t/2,y:e.y-t/2})%3E150){n=!0;break}}n||(e=l(100,100)),this.pos=e}draw(t){t.save(),t.fillStyle=s,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle=%22white%22,t.lineWidth=2,t.stroke(),t.restore()}},f=document.createElement(%22div%22);f.style.position=%22fixed%22,f.style.top=%2220px%22,f.style.left=%2220px%22,f.style.right=%2220px%22,f.style.bottom=%2220px%22,f.style.display=%22flex%22,f.style.justifyContent=%22center%22,f.style.alignItems=%22center%22,f.style.zIndex=%229999%22,f.style.backgroundColor=%22transparent%22;const%20v=document.createElement(%22canvas%22);v.width=t,v.height=t,v.style.borderRadius=%228px%22,v.style.boxShadow=%220%200%2020px%20rgba(0,0,0,0.5)%22,document.body.style.margin=%220%22,document.body.style.overflow=%22hidden%22,f.appendChild(v),document.body.appendChild(f);const%20y=v.getContext(%222d%22);let%20b=new%20m,w=new%20g,x=[],k=0,S=!1;document.addEventListener(%22keydown%22,t=%3E{%22`%22===t.key?(f.remove(),document.body.style.overflow=%22%22,document.body.style.margin=%22%22,document.removeEventListener(%22keydown%22,arguments.callee)):%22r%22===t.key.toLowerCase()&&S?(b.reset(),w=new%20g,k=0,S=!1):S||(t=%3E{let%20e;switch(t.key){case%22ArrowUp%22:e=l(0,-1);break;case%22ArrowDown%22:e=l(0,1);break;case%22ArrowLeft%22:e=l(-1,0);break;case%22ArrowRight%22:e=l(1,0);break;default:return}b.change_direction(e)})(t)});function%20C(){if(!S){b.update();if(b.check_wall_collision())S=!0;{const%20t=b.head.x-w.pos.x,e=b.head.y-w.pos.y;if(Math.sqrt(t*t+e*e)%3Co+12){b.length+=5,k+=1;for(let%20t=0;t%3Cn;t++)x.push(new%20p(w.pos));w=new%20g}for(let%20t=10;t%3Cb.body.length;t++){const%20e=b.body[t],n=b.head.x-e.x,o=b.head.y-e.y;Math.sqrt(n*n+o*o)%3C18&&(S=!0)}}}x=x.filter(t=%3Et.alpha%3E0),x.forEach(t=%3Et.update()),y.fillStyle=r,y.fillRect(0,0,t,t),w.draw(y),x.forEach(t=%3Et.draw(y)),S?(y.fillStyle=%22rgb(150,%2050,%2050)%22,b.body.forEach(t=%3E{y.beginPath(),y.arc(t.x,t.y,o,0,2*Math.PI),y.fill()})):b.draw(y),y.fillStyle=%22rgb(200,%20200,%20200)%22,y.font=%2236px%20Arial%22,y.fillText(`Score:%20${k}`,30,55),S&&(y.fillStyle=%22rgb(200,%20200,%20200)%22,y.textAlign=%22center%22,y.fillText(%22Game%20Over%20-%20Press%20R%20to%20restart%22,t/2,t/2),y.textAlign=%22left%22),requestAnimationFrame(C)}C()})();
