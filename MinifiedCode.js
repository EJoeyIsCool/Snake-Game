javascript:(function(){const containerWidth=window.innerWidth-40,containerHeight=window.innerHeight-40;let t=Math.min(containerWidth,containerHeight)*0.9;t=Math.max(300,t);const e=4,n=40,o=12,i=52,r="rgb(30, 30, 30)",a="rgb(100, 200, 100)",s="rgb(200, 50, 50)",d=["rgb(255, 50, 50)","rgb(255, 100, 100)","rgb(255, 150, 150)"],l=function(t,e){return{x:t,y:e}},c=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},h=function(t,e){return{x:t.x*e,y:t.y*e}},u=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},p=class{constructor(t){this.pos=l(t.x,t.y),this.vel=l(16*Math.random()-8,16*Math.random()-8),this.radius=Math.floor(6+5*Math.random()),this.color=d[Math.floor(3*Math.random())],this.alpha=255}update(){this.pos=c(this.pos,this.vel),this.vel=h(this.vel,.85),this.radius=Math.max(0,this.radius-.3),this.alpha=Math.max(0,this.alpha-5)}draw(t){t.save(),t.globalAlpha=this.alpha/255,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.restore()}},m=class{constructor(){this.reset()}reset(){this.head=l(t/2,t/2),this.direction=l(0,0),this.body=[];for(let e=0;e<10;e++)this.body.push(l(this.head.x,this.head.y));this.length=10,this.next_direction=l(0,0),this.pending_direction=null,this.min_turn_distance=24,this.last_turn_pos=l(this.head.x,this.head.y),this.active=!1}update(){if(this.active){if(this.pending_direction){const t=u({x:this.head.x-this.last_turn_pos.x,y:this.head.y-this.last_turn_pos.y});t>=this.min_turn_distance&&(this.change_direction(this.pending_direction),this.pending_direction=null)}(this.next_direction.x!==-this.direction.x||this.next_direction.y!==-this.direction.y)&&(this.direction=l(this.next_direction.x,this.next_direction.y)),this.head=c(this.head,h(this.direction,e)),this.body.unshift(l(this.head.x,this.head.y));for(;this.body.length>this.length;)this.body.pop()}}check_wall_collision(){return this.head.x<0||this.head.x>t||this.head.y<0||this.head.y>t}change_direction(e){if(!this.active)return this.active=!0,this.direction=e,this.next_direction=e,void(this.last_turn_pos=l(this.head.x,this.head.y));if(e.x===-this.direction.x&&e.y===-this.direction.y)return;const n=u({x:this.head.x-this.last_turn_pos.x,y:this.head.y-this.last_turn_pos.y});n>=this.min_turn_distance?(this.next_direction=e,this.last_turn_pos=l(this.head.x,this.head.y)):(e.x!==this.next_direction.x||e.y!==this.next_direction.y)&&(this.pending_direction=e)}is_position_safe(e){for(const n of this.body){const o=e.x-n.x,r=e.y-n.y;if(Math.sqrt(o*o+r*r)<i)return!1}return!0}draw(e){e.fillStyle=a;for(const t of this.body)e.beginPath(),e.arc(t.x,t.y,o,0,2*Math.PI),e.fill()}},g=class{constructor(){this.radius=12,this.generate_safe_position()}generate_safe_position(){let e,n=!1;for(let o=0;o<1000;o++){e=l(this.radius+Math.random()*(t-2*this.radius),this.radius+Math.random()*(t-2*this.radius));if(b.is_position_safe(e)){n=!0;break}}n||(e=l(t/2,t/2)),this.pos=e}draw(t){t.save(),t.fillStyle=s,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,2*Math.PI),t.fill(),t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.restore()}},f=document.createElement("div");f.style.position="fixed",f.style.top="50%",f.style.left="50%",f.style.transform="translate(-50%, -50%)",f.style.zIndex="9999",f.style.backgroundColor="transparent";const v=document.createElement("canvas");v.width=t,v.height=t,v.style.border="4px solid white",v.style.borderRadius="8px",document.body.style.margin="0",document.body.style.overflow="hidden",f.appendChild(v),document.body.appendChild(f);v.tabIndex=0;v.focus();const y=v.getContext("2d");let b=new m,w=new g,x=[],k=0,S=!1,P=!1;document.addEventListener("keydown",t=>{"`"===t.key?(f.remove(),document.body.style.overflow="",document.body.style.margin="",document.removeEventListener("keydown",arguments.callee)):"r"===t.key.toLowerCase()&&S?(b.reset(),w=new g,k=0,S=!1):"p"===t.key.toLowerCase()?P=!P:S||(t=>{let e;switch(t.key){case"ArrowUp":e=l(0,-1);break;case"ArrowDown":e=l(0,1);break;case"ArrowLeft":e=l(-1,0);break;case"ArrowRight":e=l(1,0);break;default:return}t.preventDefault(),b.change_direction(e)})(t)});function C(){if(!S&&!P){b.update();if(b.check_wall_collision())S=!0;{const t=b.head.x-w.pos.x,e=b.head.y-w.pos.y;if(Math.sqrt(t*t+e*e)<o+12){b.length+=5,k+=1;for(let t=0;t<n;t++)x.push(new p(w.pos));w=new g}for(let t=10;t<b.body.length;t++){const e=b.body[t],n=b.head.x-e.x,o=b.head.y-e.y;Math.sqrt(n*n+o*o)<18&&(S=!0)}}}x=x.filter(t=>t.alpha>0),x.forEach(t=>t.update()),y.fillStyle=r,y.fillRect(0,0,t,t),w.draw(y),x.forEach(t=>t.draw(y)),S?(y.fillStyle="rgb(150, 50, 50)",b.body.forEach(t=>{y.beginPath(),y.arc(t.x,t.y,o,0,2*Math.PI),y.fill()})):b.draw(y),y.fillStyle="rgb(200, 200, 200)",y.font="28px Arial",y.fillText(`Score: ${k}`,20,40),S&&(y.fillStyle="rgb(200, 200, 200)",y.textAlign="center",y.font="30px Arial",y.fillText("Game Over - Press R to Restart",t/2,t/2),y.textAlign="left"),requestAnimationFrame(C)}C()})();
